<xtml ns="aaeditor" light="false">	<Component id="DataPopupControl" type="ui.Control" hidden="true">      <Param name="Input" Default="%%" />      <Param name="UpdateValue" type="action.Action" script="true">        <Default t="xtml.RunXtml" Xtml="%$_FieldEditorContext/UpdateValue%"/>      </Param>      <xtml t="xmlui.XmlSelector" Class="noborder" Data="%$Input%">        <Var name="XmlRoot"/>        <OnDoubleClick t="action.RunActions">        	<Action t="menu.CloseContextMenu" />        	<Action t="xtml.UseParam" Param="UpdateValue" >        		<Data t="xml.XPathOfNode" TopXml="%$XmlRoot%"/>        	</Action>        </OnDoubleClick>        <OnSelect t="action.IfThenElse">          <Var name="FirstMultiValue" t="data.Pipeline">            <Item t="data.PathItems" Next="%..%">              <StopCondition t="yesno.ItemsEqual" Item1="%%" Item2="%$XmlRoot%"/>            </Item>            <Item t="yesno.PassesFilter">              <Filter t="yesno.NotEmpty">                <Value t="xml.Siblings" OnlyWithSameTag="true"/>              </Filter>            </Item>            <Aggregator t="data.First"/>          </Var>          <If t="yesno.IsEmpty" Value="%$FirstMultiValue%"/>          <Then t="xtml.UseParam" Param="UpdateValue">            <Data t="xml.XPathOfNode" TopXml="%$XmlRoot%"/>          </Then>          <Else t="menu.OpenContextMenu">            <Menu t="menu.ContextMenu">              <Item t="menu.DynamicMenuItems" >                <Image t="xtml.RunXtml" Xtml="%@img%" />                <Var name="ValueName" t="text.FirstSucceeding" Data="%$Selected%">                	<Item t="xml.AttributeName" />                	<Item t="xml.Tag" />                </Var>              	<Text t="xtml.RunDynamicText" Text="%@text%" />                <Var name="Type" value="number">                  <Condition t="yesno.IsNumber"/>                </Var>                <Items t="data.Pipeline">                  <Item t="aaeditor.Aggregators" />                  <Item value="%aggregator%" />                  <Item t="yesno.PassesFilter">                    <Filter t="data.IfThenElse">                      <If t="yesno.IsEmpty" Value="%@type%"/>                      <Then value="true"/>                      <Else t="yesno.ItemsEqual" Item1="%@type%" Item2="%$Type%"/>                    </Filter>                  </Item>                </Items>                <Action t="xtml.UseParam" Param="UpdateValue">                  <Var name="XPath" t="text.Concat">                    <Item t="xml.XPathOfNode" Specific="true" Data="%$FirstMultiValue/..%" TopXml="%$XmlRoot%"/>                    <Item value="/">                      <Condition t="yesno.ItemsNotEqual" Item1="%$FirstMultiValue/..%" Item2="%$XmlRoot%"/>                    </Item>                    <Item t="xml.XPathOfNode" Specific="false" Data="%$Selected%" TopXml="%$FirstMultiValue/..%"/>                  </Var>                  <Var name="SpecificXPath" t="xml.XPathOfNode" Specific="true" Data="%$Selected%" TopXml="%$XmlRoot%"/>                  <Data t="xtml.RunDynamicText" Text="%@out%" Input="%$XPath%"/>                </Action>              </Item>              <Item t="menu.MenuItem" Text="filter by '%$Att%'" Image="">              	<Condition t="xml.IsAttribute" Data="%$Selected%" />              	<Action t="xtml.UseParam" Param="UpdateValue" >              		<Data t="text.Concat" Items="">                      <Item t="xml.XPathOfNode" Data="%$Selected/..%" TopXml="%$XmlRoot%"/>                      <Item value="[@%$Att% = '%$Selected%']">                        <Var name="Att" t="xml.AttributeName" Data="%$Selected%"/>                      </Item>                    </Data>              	</Action>              	<Var name="Att" t="xml.AttributeName" Data="%$Selected%" />              </Item>            </Menu>          </Else>        </OnSelect>      </xtml>    </Component>  <Component id="Aggregators" type="data.Data">    <xtml t="xml.Xml">      <aggregators>        <aggregator text="All of '%$ValueName%'" out="%%" img="%$_Images%/studio/back1616.gif" />        <aggregator text="Count" out="=Count(%%)" img="%$_Images%/studio/balls1616.png" />        <aggregator text="Concat" out="=Concat(%%,',')" img="%$_Images%/studio/chart1616.png" />        <aggregator text="Sum" out="=Sum(%%)" img="%$_Images%/studio/chart1616.png" type="number" />        <aggregator text="Average" out="=Average(%%)" img="%$_Images%/studio/chart1616.png" type="number" />        <aggregator text="Max" out="=Max(%%)" img="%$_Images%/studio/chart1616.png" type="number" />        <aggregator text="Min" out="=Min(%%)" img="%$_Images%/studio/chart1616.png" type="number"  />        <aggregator text="This specific '%$ValueName%'" out="%$SpecificXPath%" img="%$_Images%/studio/back1616.gif" />      </aggregators>    </xtml>  </Component>  </xtml>