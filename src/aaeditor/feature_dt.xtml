<xtml ns="feature_dt" light="false">  <Component id="StudioAddPTPopup" type="popup.Style">    <xtml t="ui.CustomStyle">      <Html><![CDATA[<div> <div class="aa_popup_frame">  <div class="aa_popup_contents" /> </div></div>]]></Html>      <Css><![CDATA[#this>.aa_popup_frame {  border: 1px solid gray;  box-shadow:  2px 2px 7px 1px rgba(50,50,50,0.5);  font:12px times;  border-radius:5px;  background: #EEEEFC;  padding:4px 4px 10px 4px;}#this>.aa_popup_frame>.aa_popup_contents  {  overflow-y: auto;  overflow-x: hidden;  width: 300px;  height: 250px;}#this>.aa_popup_frame:focus {  outline: none;}.ie #this>.aa_popup_frame {  border: 1px solid black;}.aa_popup_contents::-webkit-scrollbar { width: 8px; height:8px; }.aa_popup_contents::-webkit-scrollbar-track { }.aa_popup_contents::-webkit-scrollbar-thumb { background: #CAE4CE; }]]></Css>    <Javascript><![CDATA[function show(popup) {    aa_popup(popup,{      features: [        aa_popup_feature_closeOnEsc(),        aa_popup_feature_autoFocus()      ],      defaultLocation: aa_popupNearLauncherLocation({ minWidthOfLaunchingElement: true }),      closeWhenClickingOutside: true    });}]]></Javascript>    </xtml>  </Component>  <Component id="AddFeatureField" type="field.Fields" light="false" dtsupport="false">      <Param name="Xtml" description="The xtml to add the feature to" Default="%%"/>      <Param name="OfContext" />      <Param name="Title" Default="+ Add Feature"/>      <xtml t="control.Button" ID="dt_add_feature" Title="%$Title%" HideTitle="true">        <Action t="popup.OpenPopup">          <Style t="feature_dt.StudioAddPTPopup" />          <Contents t="field.InnerPage" Title="Add Feature contents">            <Layout t="layout.Default"/>            <Field t="feature_dt.ContentsOfAddFeature" FieldXtml="%$Xtml%" OfContext="%$OfContext%" />          </Contents>        </Action>        <Style t="ui.CustomCss" base="btn.Hyperlink">          <Style t="btn.Hyperlink"/>          <Css><![CDATA[#this { cursor:pointer; color:#15c; font: bold 13px arial; }]]></Css>        </Style>        <FieldAspect t="field_feature.Layout">          <Css><![CDATA[#this {}#wrapper {  padding-top: 10px;}]]></Css>        </FieldAspect>        <FieldAspect t="fld_aspect.PicklistProperties" AutoRecalcOptions="" HideSearchBox=""/>      </xtml>    </Component>  <Component id="AddEventField" type="field.Fields" light="false" dtsupport="false">      <Param name="Xtml" Default="%%"/>      <xtml t="control.Button" ID="dt_add_event" Title="+ Add Event" HideTitle="true">        <Action t="popup.OpenPopup">          <Style t="feature_dt.StudioAddPTPopup" />          <Contents t="field.InnerPage" Title="Add Event contents">            <Layout t="layout.Default"/>            <Field t="feature_dt.ContentsOfAddEvent"/>          </Contents>        </Action>        <Style t="ui.CustomCss" base="btn.Hyperlink">          <Style t="btn.Hyperlink"/>          <Css><![CDATA[#this { cursor:pointer; color:#15c; font: bold 13px arial; }]]></Css>        </Style>        <FieldAspect t="field_feature.Layout">          <Css><![CDATA[#wrapper {  padding-top: 10px; }]]></Css>        </FieldAspect>        <FieldAspect t="fld_aspect.PicklistProperties" AutoRecalcOptions="" HideSearchBox=""/>      </xtml>    </Component><Component id="ContentsOfAddFeature" type="field.Fields" light="false" dtsupport="false">  <Param name="FieldXtml"/>  <Param name="OfContext"/>  <xtml t="control.Layout" Title="">    <Field t="field.ItemListContainer" ID="features_Top" Title="features">      <Items t="itemlist.Items">        <Items t="feature_dt.AddFeatureFieldOptions" Type="field.FieldAspect" FieldXtml="%$FieldXtml%" OfContext="%$OfContext%"/>      </Items>      <Field t="control.Layout" ID="Filters" Title="Filters">        <Layout t="layout.Default"/>        <FieldAspect t="itemlist_aspect.FilterGroup"/>        <Field t="fld.Field" Title="Search feature" ID="Filter_name" FieldData="%@name%">          <FieldType t="fld_type.EditableText">            <Style t="ui.CustomCss" base="editable_text.JBartTextbox">              <Style t="editable_text.JBartTextbox"/>              <Css><![CDATA[#this {  font-size: 11px;  width: 274px;  height: 20px;  padding-top: 3px;  padding-right: 3px;  padding-bottom: 3px;  padding-left: 6px;  border-top:none;  border-left:none;  border-right:none;  border-bottom: 1px solid #BDC7D8;  background: transparent;}#this:focus {  outline: none;}]]></Css>            </Style>          </FieldType>          <FieldAspect t="itemlist_aspect.Filter" ImmediateFilter="true">            <FieldData t="text.Capitalize" Mode="capital to separate words" Data="%Definition/@id%"/>            <FilterType t="itemlist_filter.TextWords"/>          </FieldAspect>          <FieldAspect t="field_aspect.ItemListSelectionWithKeyboard" RunAlsoOnItemClick="true"/>        </Field>      </Field>      <Field t="field.ItemList" Title="features" ID="studio_features_List_of_add_feature">        <View t="ui.CustomCss" base="itemlist_style.Simple">          <Style t="itemlist_style.Simple"/>          <Css><![CDATA[#this>.aa_item {  cursor:pointer;  overflow: hidden;  height: 25px;  padding-top: 3px;  padding-right: 17px;  padding-bottom: 11px;  padding-left: 5px;}#this {}]]></Css>        </View>        <FieldAspect t="itemlist_aspect.ItemClick">          <OnClick t="feature_dt.DoAddFeature">            <FeatureXtml t="xml.Xml" DynamicContent="true">              <FieldAspect t="%ID%"/>            </FeatureXtml>          </OnClick>        </FieldAspect>        <FieldAspect t="itemlist_aspect.ItemSelection" KeyboardSupport="true" AlwaysOneSelected="true" MouseSupport="mouse hover">          <Css><![CDATA[{ background: #D9E8FB; }]]></Css>        </FieldAspect>        <FieldAspect t="itemlist_aspect.ShowTextWhenNoItems" Text="No features match your search"/>        <Field t="control.Layout" ID="Horizontal" Title="Horizontal">          <Layout t="layout.HorizontalHtmlTable" Spacing="15px" VerticalAlign="top"/>          <Field t="field.Image" HideTitle="true" ID="Image" Title="Image">                <Image1 t="image.Image" Width="24px" Height="24px" Url="%$_Images%/studio/bonuses2421.gif">                  <ImageProportions t="image.KeepProportions" FillImage="true" CenterImage="true"/>                </Image1>            <Image t="image.ImageInSprite" Url="%$_Images%/studio/studio_icons.png?ver=28_09_14_2" Size="24,24" PositionInSprite="0,48">            </Image>            <Style t="image.PlainImage"/>            <FieldAspect t="field_feature.Layout">              <Css><![CDATA[#this { margin-top: 2px; margin-left: 4px; }#wrapper { }]]></Css>            </FieldAspect>          </Field>          <Field t="control.Layout" ID="Group" Title="Vertical">            <Field t="fld.Field" ID="name" Title="Name">              <FieldType t="fld_type.Text">                <Style t="ui.CustomCss" base="uitext.PlainText">                  <Style t="uitext.PlainText"/>                  <Css><![CDATA[#this {  font:bold 12px arial;}]]></Css>                </Style>              </FieldType>              <FieldData t="data.Pipeline">                <Item value="%Definition/@id%"/>                <Item t="text.Capitalize" Mode="capital to separate words"/>              </FieldData>            </Field>            <Layout t="layout.Vertical" Spacing="1px"/>            <Field t="fld.Field" FieldData="%Definition/@description%" ID="description" Title="Description">              <FieldType t="fld_type.Text">                <Style t="ui.CustomCss" base="uitext.PlainText">                  <Style t="uitext.PlainText"/>                  <Css><![CDATA[#this {  font: 11px arial;  white-space: nowrap;  overflow: ellipsis;}]]></Css>                </Style>              </FieldType>            </Field>          </Field>        </Field>      </Field>      <Layout t="layout.Default"/>      <Field t="control.Button" ID="show_all" Title="Show All" HideTitle="true" ButtonText="Show features for all contexts">        <Condition t="yesno.IsEmpty" Value="%$OfContext%"/>        <Style t="btn.Hyperlink"/>        <FieldAspect t="field_feature.Layout">          <Css><![CDATA[#this { margin-top: 5px; margin-left: 15px; }#wrapper { }]]></Css>        </FieldAspect>        <Action t="operation.RunActions">          <Action t="itemlist_action.ChangeItemsOfItemlist">            <Items t="itemlist.Items">              <Items t="aaeditor.ComponentsOfTypeNew" Type="field.FieldAspect" LightOnly="true"/>            </Items>          </Action>          <Action t="field.RefreshField" FireOnUpdate="" FieldID="studio_features_List_of_add_feature" Scope="sibling"/>          <Action t="uiaction.Hide"/>        </Action>      </Field>    </Field>    <Layout t="layout.Default"/>  </xtml></Component>  <Component id="ContentsOfAddEvent" type="field.Fields" light="false" dtsupport="false">      <xtml t="control.Layout" Title="">        <Field t="field.ItemListContainer" ID="features_Top" Title="features">          <Items t="itemlist.Items">            <Items t="aaeditor.ComponentsOfTypeNew" Type="field_feature.Event" LightOnly="true"/>          </Items>          <Field t="control.Layout" ID="Filters" Title="Filters">            <Layout t="layout.Default"/>            <FieldAspect t="itemlist_aspect.FilterGroup"/>            <Field t="fld.Field" Title="Search feature" ID="Filter_name" FieldData="%@name%">              <FieldType t="fld_type.EditableText">                <Style t="ui.CustomCss" base="editable_text.JBartTextbox">                  <Style t="editable_text.JBartTextbox"/>                  <Css><![CDATA[#this {  font-size: 11px;  width: 274px;  height: 20px;  padding-top: 3px;  padding-right: 3px;  padding-bottom: 3px;  padding-left: 6px;  border-top:none;  border-left:none;  border-right:none;  border-bottom: 1px solid #BDC7D8;  background: transparent;}#this:focus {  outline: none;}]]></Css>                </Style>              </FieldType>              <FieldAspect t="itemlist_aspect.Filter" FieldData="%Definition/@id%" ImmediateFilter="true">                <FilterType t="itemlist_filter.Text"/>              </FieldAspect>              <FieldAspect t="field_aspect.ItemListSelectionWithKeyboard" />            </Field>          </Field>          <Field t="field.ItemList" Title="features" ID="features_List">            <View t="ui.CustomCss" base="itemlist_style.Simple">              <Style t="itemlist_style.Simple"/>              <Css><![CDATA[#this>.aa_item {  cursor:pointer;  overflow: hidden;  height: 25px;  padding-top: 3px;  padding-right: 17px;  padding-bottom: 11px;  padding-left: 5px;}#this {}]]></Css>            </View>                      <FieldAspect t="itemlist_aspect.ItemClick">                        <OnClick t="feature_dt.DoAddEvent" Event="%ID%"/>                      </FieldAspect>            <FieldAspect t="itemlist_aspect.ItemSelection" KeyboardSupport="true" AlwaysOneSelected="true" MouseSupport="mouse hover">              <Css><![CDATA[{ background: #D9E8FB; }]]></Css>            </FieldAspect>            <FieldAspect t="itemlist_aspect.ShowTextWhenNoItems" Text="No features match your search"/>            <Field t="control.Layout" ID="Horizontal" Title="Horizontal">              <Layout t="layout.HorizontalHtmlTable" Spacing="15px" VerticalAlign="top"/>              <Field t="field.Image" HideTitle="true" ID="Image" Title="Image">                <Image t="image.Image" Width="24px" Height="24px" Url="%$_Images%/studio/mini-corp-mem.jpg">                  <ImageProportions t="image.KeepProportions" FillImage="true" CenterImage="true"/>                </Image>                <Style t="image.PlainImage"/>                <FieldAspect t="field_feature.Layout">                  <Css><![CDATA[#this { margin-top: 4px; margin-left: 4px; }#wrapper { }]]></Css>                </FieldAspect>              </Field>              <Field t="control.Layout" ID="Group" Title="Vertical">                <Field t="fld.Field" ID="name" Title="Name">                  <FieldType t="fld_type.Text">                    <Style t="ui.CustomCss" base="uitext.PlainText">                      <Style t="uitext.PlainText"/>                      <Css><![CDATA[#this {  font:bold 12px arial;}]]></Css>                    </Style>                  </FieldType>                  <FieldData t="data.Pipeline">                    <Item value="%Definition/@id%"/>                    <Item t="text.Capitalize" Mode="capital to separate words"/>                  </FieldData>                </Field>                <Layout t="layout.Vertical" Spacing="1px"/>                <Field t="fld.Field" FieldData="%Definition/@description%" ID="description" Title="Description">                  <FieldType t="fld_type.Text">                    <Style t="ui.CustomCss" base="uitext.PlainText">                      <Style t="uitext.PlainText"/>                      <Css><![CDATA[#this {  font: 11px arial;  white-space: nowrap;  overflow: ellipsis;}]]></Css>                    </Style>                  </FieldType>                </Field>              </Field>            </Field>            <FieldAspect t="itemlist_aspect.LongList" MaxTimeToRenderItems="200">              <Style t="text_as_item.Default"/>            </FieldAspect>          </Field>          <Layout t="layout.Default"/>        </Field>        <Layout t="layout.Default"/>      </xtml>    </Component>    <Component id="DoAddFeature" type="action.Action">      <Param name="FeatureXtml" />      <xtml t="action.RunActions">        <Action t="popup.CloseContainingPopup" />        <Action t="itemlist_action.AddItemToItemList" ItemList="gstudio_properties_features" Item="%$FeatureXtml%">          <DoOnAddedItem t="uiaction.Click" RunOn=".section_title" RunOn1=".aa_field_toolbar_image" />                    </Action>        <Action t="tabcontrol.RefreshTabControlTitles" TabControl="DT_Properties_Tab" />      </xtml>            <xtml1 t="action.RunActions">        <Action t="popup.CloseContainingPopup" />      <Action t="xml.AddToXmlItems" Items="%$_OriginalCntr/Items%" Data="%$FeatureID%">        <Condition t="yesno.NotEmpty" Value="%%" />        <Var name="_Cntr" value="%$_OriginalCntr%" />        <Var name="ComponentDef" t="xtml.ComponentDefinition" ID="%%" />        <Var name="Type" value="%$ComponentDef/@type%" />        <Xml t="xml.ByTag">          <Tag t="data.IfThenElse" If="%$ComponentDef/@type%=='uiaspect.Aspect'" Then="Aspect" Else="FieldAspect" />          <Change t="xml.SetAttribute" AttributeName="t" Value="%%" />        </Xml>        <DoOnAddedXml t="action.RunActions">          <Action t="xtml.RunXtml" Xtml="%$ComponentDef/ParamGenerator%" />          <Action t="uiaction.AddItemElement" Item="%%" SelectIt="true">            <DoOnAddedElement t="uiaction.Click" RunOn=".aa_field_toolbar_image"/>          </Action>          <Action t="field_dt.RefreshPreview" />        </DoOnAddedXml>      </Action>      <Action t="tabcontrol.RefreshTabControlTitles" TabControl="DT_Properties_Tab" />      </xtml1>          </Component>    <Component id="DoAddEvent" type="action.Action">      <Param name="Event" />      <xtml t="feature_dt.DoAddFeature">        <FeatureXtml t="xml.Xml" DynamicContent="true">          <FieldAspect t="field_feature.HandleEvent">            <Event t="%$Event%" />          </FieldAspect>        </FeatureXtml>      </xtml>    </Component>  <Component id="BuildFeatureDTCache" type="data.Data">    <xtml t="aaeditor.ComponentsOfTypeNew" Type="field.FieldAspect" LightOnly="true" />  </Component>  <Component id="AddFeatureFieldOptions" type="data.Data" execution="native">    <Param name="FieldXtml" />    <Param name="OfContext" />  </Component>  <Component id="FieldSpecificFeatureContexts" type="data.Data" execution="native">    <Param name="FieldXtml" />  </Component>    <Component id="NotEmptyFeatureContext" type="data.Boolean" execution="native">    <Param name="OfContext" />  </Component>    <Component id="AspectHasContext" type="data.Boolean" execution="native">    <Param name="Component" />    <Param name="OfContext" />  </Component>  <Component id="Features" type="field.Fields" light="false" dtsupport="false">      <Param name="FieldXtml"/>      <xtml t="field.Layout" ID="DT_Properties_Features" Title="Features And Events" Data="%$FieldXtml%">        <Condition t="xtml.ComponentHasParam" Component="%$FieldXtml/@t%" Param="FieldAspect"/>        <FieldAspect t="field_feature.Css">          <Css><![CDATA[#this { padding: 5px 10px 10px 10px; }]]></Css>        </FieldAspect>        <FieldAspect t="field_aspect.Title">          <Title t="data.Pipeline">            <Var name="Count" value="%=Count($FieldXtml/FieldAspect)%"/>            <Item value="Features And Events (%$Count%)" />          </Title>        </FieldAspect>        <Field t="field.ItemList" Title="features" ID="gstudio_properties_features">          <View t="itemlist_style.JBartTableNoHeader" MinWidth="280px"/>          <FieldAspect t="field_aspect.ItemListContainer">            <Items t="itemlist.XmlItems" ParentXml="%$FieldXtml%" Tag="FieldAspect" />          </FieldAspect>          <Field t="control.Layout" Title="">            <Field t="data.IfThenElse">              <If t="xtml_dt2.UseXtmlDt2" />              <Then t="xtml_dt2.ComponentInTable" TableTitle="" />              <Else t="field_control.CustomXtmlControl" ID="DT_Event_Details" Title="Event Details">                <Control t="field_dt.ComponentInTable" Xtml="%%" />              </Else>            </Field>            <Layout t="layout.Default"/>            <Field t="control.Button" ID="Delete" Title="Delete">              <Style t="btn.ImageOnlyButton"/>              <Image t="gstudio.StudioSmallImage" PositionInSprite="128,0" />              <FieldAspect t="field_aspect.ShowOnlyOnItemHover">                <Css><![CDATA[#this { display: none !important;}#item:hover #this { display: block !important; }]]></Css>              </FieldAspect>              <FieldAspect t="field_feature.Css">                <Css><![CDATA[#this {  position:absolute;  top:0px;  right:0px;}]]></Css>              </FieldAspect>              <Action t="popup_confirmation.OpenConfirmationPopup" Title="jBart Studio - Delete Feature">                <Style t="popup_confirmation.GoogleDriveConfirmation"/>                <Action t="itemlist_action.DeleteItem">                  <Item t="itemlist_item.ItemInContext"/>                </Action>                <Action t="field_dt.RefreshPreview"/>                <Action t="tabcontrol.RefreshTabControlTitles" TabControl="DT_Properties_Tab" />              </Action>            </Field>            <FieldAspect t="field_feature.Css">              <Css><![CDATA[#this { position:relative; }]]></Css>            </FieldAspect>          </Field>          <FieldAspect t="itemlist_aspect.UpdateOnAddOrDeleteItem"/>          <FieldAspect t="itemlist_aspect.DragAndDropItems">            <CssForDraggedElement><![CDATA[{ opacity: 0.9; }]]></CssForDraggedElement>            <CssForDraggedSpace><![CDATA[{ }]]></CssForDraggedSpace>          </FieldAspect>                  </Field>        <Field t="feature_dt.AddFeatureField"/>        <Field t="feature_dt.AddEventField"/>        <Field t="data.Pipeline">          <Item t="feature_dt.FieldSpecificFeatureContexts" FieldXtml="%$FieldXtml%" />          <Item t="yesno.PassesFilter">            <Filter t="feature_dt.NotEmptyFeatureContext" OfContext="%ID%" />          </Item>          <Item t="feature_dt.AddFeatureField" Xtml="%$FieldXtml%" OfContext="%ID%" Title="%Title%" />        </Field>      </xtml>    </Component></xtml>