<xtml ns="gstudio_drag" light="false">  <Component id="StartDragMode" type="action.Action" execution="native">  	<NativeHelper name="SelectedXtml" t="gstudio.SelectedFieldXtml" />  </Component>  <Component id="EnsureLayoutAspectCss" type="action.Action">	  <xtml t="action.RunActions">	     <Data t="gstudio.SelectedFieldXtml" />	     <Action t="xml.AddXmlChildren" Parent="%%" >	        <Condition t="yesno.IsEmpty" Value="%$_JBartStudio/SelectedFieldXtml/FieldAspect[@t='field_feature.Layout']%" />	        <Children t="xml.Xml">	          <FieldAspect t="field_feature.Layout">	            <Css><![CDATA[#this {} #wrapper {}]]></Css>	          </FieldAspect>	        </Children>	     </Action>	  </xtml>  </Component>  <Component id="LayoutAspectCssAsXml" type="data.Data">    <xtml t="data.Pipeline">       <Item value="%$_JBartStudio/SelectedFieldXtml/FieldAspect[@t='field_feature.Layout']/Css%" />       <Item t="css_dt.Css2Xml" Css="%%" />    </xtml>  </Component>  <Component id="LayoutAspect" type="data.Data">  	<xtml t="data.Pipeline">      <Item value="%$_JBartStudio/SelectedFieldXtml/FieldAspect[@t='field_feature.Layout']%" />  	</xtml>  </Component>  <Component id="WriteLayoutAspectCssFromXml" type="action.Action">  	<xtml t="xml.WriteCData" Element="%$_JBartStudio/SelectedFieldXtml/FieldAspect[@t='field_feature.Layout']/Css%">  		<CDataText t="css_dt.Xml2Css" Xml="%%" />  	</xtml>  </Component><Component id="OpenLeftTopDialog" type="action.Action">  <Param name="TopData"/>  <Param name="LeftData"/>  <Param name="AspectXml"/>  <xtml t="popup.OpenPopup" PopupTitle="Drag Properties">    <Style t="gstudio.StudioFloatingPopup" MinWidth="300px"/>    <Feature t="gstudio.StudioFloatingPopupFeatures" Identifier="lefttop_properties"/>    <Feature t="popup.ZIndex" ZIndex="6001"/>    <Contents t="field.InnerPage">      <Field t="control.PropertySheet" ID="gstudio_drag_properties" Title="Fields">        <FieldAspect t="field_feature.Layout">          <Css><![CDATA[#this { padding: 10px; }]]></Css>        </FieldAspect>        <Field t="fld.Field" FieldData="%$TopData%" ID="top" Title="Top">          <FieldType t="fld_type.EditableText">            <Style t="editable_text.JBartTextbox"/>          </FieldType>          <FieldAspect t="field_feature.HandleEvent">            <Event t="field_feature.Update"/>            <Action t="object.RunMethod" Object="%$_GStudioDragObject%" Method="Update"/>          </FieldAspect>        </Field>        <Field t="fld.Field" FieldData="%$LeftData%" ID="left" Title="Left">          <FieldType t="fld_type.EditableText">            <Style t="editable_text.JBartTextbox"/>          </FieldType>          <FieldAspect t="field_feature.HandleEvent">            <Event t="field_feature.Update"/>            <Action t="object.RunMethod" Object="%$_GStudioDragObject%" Method="Update"/>          </FieldAspect>        </Field>        <Field t="fld.Field" FieldData="%$AspectXml/!@dragProperty%" ID="left" Title="Property">          <FieldType t="fld_type.Picklist" AllowEmptyValue="false" AllowValueNotInOptions="false">            <Style t="editable_picklist.JBartPicklist" Width="150px"/>            <Options t="editable_picklist.OptionsByCommas" Options="#this margin,#this padding,#this absolute,#wrapper margin,#wrapper padding"/>          </FieldType>          <FieldAspect t="field_feature.HandleEvent">            <Event t="field_feature.Update"/>            <Action t="object.RunMethod" Object="%$_GStudioDragObject%" Method="UpdateDragProperty"/>          </FieldAspect>        </Field>        <Style t="properties.Default" PropertiesWidth="100px"/>      </Field>      <Layout t="layout.Default"/>      <Field t="control.Label" ID="_Label" Title="Ctrl" Text="(click ctrl key while dragging to change y axis only)">        <Style t="uitext.PlainText"/>        <FieldAspect t="field_feature.Css">          <Css><![CDATA[#this { padding-bottom: 13px; padding-left: 10px; }]]></Css>        </FieldAspect>      </Field>    </Contents>  </xtml></Component>  <Component id="LeaveDragMode" type="action.Action">    <xtml t="action.RunActions">      <Action t="field.RefreshField" FieldID="gstudio_toolbar_layout,DT_Properties_Tab" Scope="screen" />      <Action1 t="tabcontrol.RefreshTabControlTitles" TabControl="DT_Properties_Tab" />    </xtml>  </Component>  <Component id="DragPropertyToSimplifier" type="data.Data">    <Param name="CssXml" />    <Param name="Property" />    <xtml t="data.Pipeline">      <Var name="Selector" t="text.Split" Text="%$Property%" Separator=" " Part="First" />      <Var name="Simplifier" t="text.Split" Text="%$Property%" Separator=" " Part="Second" />      <Var name="IsAbsolute" value="%$Simplifier% == 'absolute'" />      <Item value="%$CssXml/Css[@selector='{$Selector}']/Simplifiers%" />      <Item value="%{$Simplifier}%" />    </xtml>  </Component>  <Component id="ConvertDragProperty" type="action.Action">    <Param name="Input" Default="%%" />    <xtml t="action.RunActions" >      <Var name="CssXml" t="gstudio_drag.LayoutAspectCssAsXml" />      <Var name="ChangingToAbsolutePosition" t="yesno.Contains" AllText="%$Input/NewValue%">        <Text value="absolute" />      </Var>      <Var name="OldSimplifier" t="gstudio_drag.DragPropertyToSimplifier" CssXml="%$CssXml%" Property="%$Input/OldValue%" />      <Var name="NewSimplifier" t="gstudio_drag.DragPropertyToSimplifier" CssXml="%$CssXml%" Property="%$Input/NewValue%" />      <Action t="action.WriteValue" To="%$NewSimplifier/!@type%" Value="separated" />      <Action t="action.WriteValue" To="%$NewSimplifier/!@top%" Value="%$OldSimplifier/@top%" />      <Action t="action.WriteValue" To="%$NewSimplifier/!@left%" Value="%$OldSimplifier/@left%" />      <Action t="action.WriteValue" To="%$OldSimplifier/@top%" Value="0" />      <Action t="action.WriteValue" To="%$OldSimplifier/@left%" Value="0" />      <Action t="gstudio_drag.WriteLayoutAspectCssFromXml" Data="%$CssXml%" />    </xtml>  </Component></xtml>