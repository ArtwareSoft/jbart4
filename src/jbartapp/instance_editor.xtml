<xtml ns="instance_editor" light="false">  <Component id="InstanceEditorMain" type="ui.Control">    <xtml t="control.ShowFieldControl">      <Var name="_InstanceEditor" t="instance_editor.InstanceEditorObject"/>      <Field t="control.Layout" ID="instance_editor_top">        <Field t="control.Layout" ID="studio_for_strong_refresh">          <FieldAspect t="instance_editor.InstanceEditorVariables"/>          <FieldAspect t="field_feature.HandleEvent">            <Event t="field_feature.BeforeRenderingControl"/>            <Action t="instance_editor.EnhanceEditor"/>          </FieldAspect>          <Field t="control.Layout" ID="studio_for_collapse_refresh">            <FieldAspect t="google_drive.StudioCollapseFieldAspect"/>            <Field t="control.Layout" ID="studio_top_area">              <FieldAspect t="google_drive.TopAreaFieldAspect"/>              <Field t="control.Layout" ID="studio_top_white_area" Title="">                <FieldAspect t="field_feature.Css">                  <Css><![CDATA[#this { padding-top: 0px; padding-left: 0px;background:white; } .studio_collapsed #this { display:none !important; }]]></Css>                </FieldAspect>                <Field t="google_drive.ControlToOpenGoogleDrive"/>                <Field t="control.Layout" ID="gstudio_Group5" Title="Group">                  <Field t="google_drive.NameAndShareBar" MainItemName="%$Settings/@name%" RenamePopupTitle="Rename Widget" />                  <Layout t="ui.CustomCss" base="layout.Default">                    <Style t="layout.Default"/>                    <Css><![CDATA[#this {  padding: 8px 0 0 15px;}]]></Css>                  </Layout>                  <Field t="instance_editor.MainMenu" />                </Field>                <Layout t="ui.CustomCss" base="layout.HorizontalCss3">                  <Style t="layout.HorizontalCss3" Spacing="0" FullWidth="true"/>                  <Css><![CDATA[#this { width:100\%; }]]></Css>                </Layout>              </Field>              <Field t="instance_editor.MainToolbar" />              <Field t="gstudio.SaveIndicator"/>            </Field>            <Field t="instance_editor.EditorBody"/>          </Field>        </Field>      </Field>    </xtml>  </Component>      <Component id="Save" type="action.Action">    <xtml t="action.IfThenElse">      <If t="yesno.NotEmpty" Value="%$_InstanceEditor%" />      <Else t="gstudio.Save" AlsoDeploy="false"/>      <Then t="async.RunAsyncActions">        <Action t="notification_box.ShowNotification" NotificationBox="GStudio_NotificationBox" Text="Saving..." Duration="2000" Status="saving" />        <Action t="object.RunMethod" Object="%$_InstanceEditor%" Method="Save" />        <Action t="notification_box.ShowNotification" NotificationBox="GStudio_NotificationBox" Text="Saved" Duration="2000" Status="saved" />      </Then>    </xtml>  </Component>  <Component id="InstanceEditorObject" type="data.Data" execution="native" />  <Component id="InstanceEditorVariables" type="field.FieldAspect" execution="native" />  <Component id="EnhanceEditor" type="action.Action">    <xtml t="action.RunActions">      <Action t="xtml.RunXtml" Xtml="%$_WidgetXml/EnhanceEditor%" Condition="%$_WidgetXml/EnhanceEditor/@t% != ''" />    </xtml>  </Component>  <Component id="EditorBody" type="field.Fields">    <xtml t="control.Layout" ID="gstudio_widget_wrapper" Title="">      <FieldAspect t="field_feature.Css">        <Css><![CDATA[#this { padding-top: 110px; padding-left: 25px; border-top: 1px solid #E5E5E5; padding-bottom: 40px; }  .studio_collapsed #this { padding-top: 50px; }]]>        </Css>      </FieldAspect>      <Field t="control.Layout" Title="Preview and settings" ID="editor1">        <Layout t="layout.HorizontalCss3" Spacing="40"/>        <Field t="instance_editor.InplaceSettings" />        <Field t="control.Layout" Title="" ID="editor">         <FieldAspect t="object.RunMethod" Method="Run">            <Object t="xtml.RunXtml">              <Xtml value="%$_AppContext/AppXtml/../../Component[#main]/xtml/FieldAspect[@t='field_aspect.PagePreviewSize']%" />            </Object>          </FieldAspect>          <Field t="control.Layout" Title="" ID="editor3">            <Field t="instance_editor.InstancePreview" />          </Field>        </Field>      </Field>    </xtml>  </Component>  <Component id="SettingsEditor" type="field.Fields" execution="native" />  <Component id="Preview" type="field.Fields" execution="native" />  <Component id="InplaceSettings" type="field.Fields" light="false">    <xtml t="control.Layout">      <FieldAspect t="field_feature.HandleEvent">        <Event t="field_feature.ControlAttached"/>        <Action t="gstudio.AutoRefreshOnSettingsChange" Settings="%$Settings%" >          <RefreshAction t="sample.RefreshPreviewFromSettings" />        </Action>      </FieldAspect>                          <Field t="sample.Settings" />    </xtml>    </Component>  <Component id="InstancePreview" type="field.Fields" hidden="true" execution="native" /><Component id="MainMenu" type="field.Fields" hidden="true">  <xtml t="google_drive.MainMenu" Title="Main Menu">    <Field t="google_drive.MainMenuButton" ID="gmenu_File" Title="File">      <Field t="control.Button" ID="File" Title="Save">        <Style t="gstudio.StudioMenuItem"/>        <Image t="gstudio.StudioSmallImage" PositionInSprite="48,0"/>        <Action t="instance_editor.Save" />      </Field>      <Field t="control.Button" ID="Deploy_instance" Title="Publish ..." HideTitle="true">        <Style t="gstudio.StudioMenuItem"/>        <Action t="gstudio_deploy.OpenDeployPopup"/>        <Image1 t="gstudio.StudioSmallImage" PositionInSprite="272,0"/>             </Field>            <Field t="control.SeparatingLine" ID="_Separator" Title="Separator">        <Style t="gstudio.StudioMenuSeparator"/>      </Field>      <Field t="control.Button" ID="File" Title="Settings as xml...">        <Style t="gstudio.StudioMenuItem"/>        <Action t="xmlui.ShowXmlDialog" Title="Xml Source of %$Settings/@name%" AutoWrite="true" AutoWriteAllowTagChange="" Xml="%$Settings%">          <OnUpdate t="action.RunActions">            <Action t="gstudio.Refresh"/>            <Action t="bart_dt.RefreshDtPopups"/>          </OnUpdate>        </Action>      </Field>      <Field t="control.Button" ID="File" Title="Style as xml...">        <Style t="gstudio.StudioMenuItem"/>        <Action t="xmlui.ShowXmlDialog" Title="Style Source of %$Settings/@name%" AutoWrite="true" AutoWriteAllowTagChange="" Xml="%$Settings/styleProps%">          <OnUpdate t="action.RunActions">            <Action t="gstudio.Refresh"/>            <Action t="bart_dt.RefreshDtPopups"/>          </OnUpdate>        </Action>      </Field>      <Field t="control.Button" ID="File" Title="Data as xml...">        <Style t="gstudio.StudioMenuItem"/>        <Action t="xmlui.ShowXmlDialog" Title="Data of %$Settings/@name%" AutoWrite="true" AutoWriteAllowTagChange="" Xml="%$Settings/data%">          <OnUpdate t="action.RunActions">            <Action t="gstudio.Refresh"/>            <Action t="bart_dt.RefreshDtPopups"/>          </OnUpdate>        </Action>      </Field>      <Field t="control.Button" ID="Upload Studio" Title="Upload Studio..." HideTitle="true">        <Condition t="gstudio.IsLocalhost"/>        <Style t="gstudio.StudioMenuItem"/>        <Action t="action.RunActions">          <Action t="notification_box.ShowNotification" NotificationBox="GStudio_NotificationBox" Text="Uploading Studio ..." Status="saving"/>          <Action t="action.RunOnNextTimer">            <Action t="jbart_studio.UploadCurrentStudio" Server="http://jbartdb.appspot.com" AddVersionSuffix="false" WriteToLocalFileSystem1="true">              <OnSuccess t="notification_box.ShowNotification" NotificationBox="GStudio_NotificationBox" Text="Studio uploaded" Status="saved"/>            </Action>          </Action>        </Action>      </Field>    </Field>    <Field t="google_drive.MainMenuButton" ID="gmenu_Style" Title="Style">      <Field t="data.Pipeline">        <Item value="%$Styles/style[#1]/styleProps/css%" />        <Item t="instance_editor.CustomizeCssSpecificMenuItem" CssXml="%%" />      </Field>    </Field>    <Field t="google_drive.MainMenuButton" ID="gmenu_Style" Title="Help">      <Field t="control.Button" ID="Pricing" Title="Let Me See" HideTitle="true">        <Style t="gstudio.StudioMenuItem"/>        <Action t="uiaction.GoToPage" Url="http://www.artwaresoft.com/letmesee" Type="open in a new tab" />      </Field>      <Field t="control.Button" ID="Pricing" Title="Pricing" HideTitle="true">        <Style t="gstudio.StudioMenuItem"/>        <Action t="uiaction.GoToPage" Url="http://www.artwaresoft.com/letmesee#?page=Pricing" Type="open in a new tab" />      </Field>    </Field>  </xtml></Component> <Component id="MainToolbar" type="field.Fields" hidden="true" dtsupport="false">    <xtml t="google_drive.Toolbar" Title="toobar" ID="studio_main_toolbar">      <Field t="google_drive.ExpandCollapseToolbarButtons" />      <Field t="control.Button" ID="gstudio_toolbar_save" Title="Save">        <Style t="google_drive.StudioToolbarIcon"/>        <Action t="instance_editor.Save" />        <Image t="gstudio.StudioSmallImage" PositionInSprite="48,0"/>      </Field>        <Field t="control.Button" ID="gstudio_toolbar_refresh" Title="Refresh">          <Style t="google_drive.StudioToolbarIcon"/>          <Action t="gstudio.Refresh"/>          <Image t="gstudio.StudioSmallImage" PositionInSprite="80,0"/>        </Field>        <Field1 t="control.Button" ID="gstudio_toolbar_publish" Title="Publish...">          <Style t="google_drive.StudioToolbarIcon"/>          <Action t="gstudio_deploy.OpenDeployPopup"/>        </Field1>        <Field t="instance_editor.StudioToolbarExtension" />      <Field t="instance_editor.UpdateVersionBox" />    </xtml>  </Component>  <Component id="NewInstanceBlankDocument" type="async_data.Data" execution="native">    <Param name="Widget" />    <Param name="Version" />    <Param name="WidgetBaseUrl" />  </Component>  <Component id="AppStyleMenuItem" type="field.Fields" hidden="true" dtsupport="false">    <Param name="StyleXml" Default="%%"/>    <xtml t="control.Button" Title="%$StyleXml/@name%">      <Style t="gstudio.StudioMenuItem"/>      <Action t="action.RunActions">        <Var name="DataResourceXtml" value="%$_AppContext/AppXtml/DataResource[@ResourceID='Settings']/Value%" />        <Action t="xml.WriteValue" To="%$Settings/!@style%" Value="%$StyleXml/@id%" />        <Action t="xml.ReplaceXmlElement" Element="%$Settings/styleProps%" NewElement="%$StyleXml/styleProps%" />        <Action t="xml.ReplaceXmlChildren" Parent="%$DataResourceXtml%" Children="%$Settings%" CloneChildren="true" />        <Action t="gstudio.SwitchPage" PageID="main"/>      </Action>    </xtml>  </Component><Component id="SampleSettingsMenuItem" type="field.Fields" hidden="true" dtsupport="false">  <Param name="SettingsInfo" Default="%%"/>  <xtml t="control.Button" Title="%$SettingsInfo/Name%">    <Style t="gstudio.StudioMenuItem"/>    <Action t="http.HttpCall" Url="/ajaxart/devdb/sample_file/%$SettingsInfo/File%">      <Aspect t="http.CacheKiller"/>      <OnSuccess t="operation.RunActions">        <Action t="xml.ReplaceXmlElement" Mode="keep original tag" Element="%$Settings%">          <NewElement t="xml.TextToXml"/>        </Action>        <Action t="gstudio.Refresh"/>      </OnSuccess>    </Action>  </xtml></Component><Component id="AppMainMenu" type="field.Fields" light="false">  <xtml t="google_drive.MainMenuButton" ID="gmenu_app" Title="App Editor">    <Field t="data.Pipeline">      <Item value="%$Styles/style%"/>      <Item t="instance_editor.AppStyleMenuItem"/>    </Field>    <Field t="control.SeparatingLine" ID="SeparatingLine" Title="SeparatingLine">      <Style t="gstudio.StudioMenuSeparator"/>    </Field>    <Field t="control.Button" ID="Add_Data_Resource" Title="Set Current Style Properties As Default">      <Style t="gstudio.StudioMenuItem"/>      <Action t="action.RunActions">        <Var name="StyleXml" value="%$Styles/style[#{$Settings/@style}]%" />        <Var name="DataResourceXtml" value="%$_AppContext/AppXtml/DataResource[@ResourceID='Styles']/Value%" />        <Var name="SettingDataResourceXtml" value="%$_AppContext/AppXtml/DataResource[@ResourceID='Settings']/Value%" />        <Action t="xml.ReplaceXmlElement" NewElement="%$Settings/styleProps%" Element="%$StyleXml/styleProps%" />        <Action t="xml.WriteValue" To="%$Settings/!@style%" Value="%$StyleXml/@id%" />        <Action t="xml.ReplaceXmlChildren" Parent="%$DataResourceXtml%" Children="%$Styles%" CloneChildren="true" />        <Action t="xml.ReplaceXmlChildren" Parent="%$SettingDataResourceXtml%" Children="%$Settings%" CloneChildren="true" />      </Action>    </Field>    <Field t="control.SeparatingLine" ID="SeparatingLine" Title="SeparatingLine">      <Style t="gstudio.StudioMenuSeparator"/>    </Field>    <Field t="control.Button" ID="Add_Data_Resource" Title="Customize Look and Feel...">      <Style t="gstudio.StudioMenuItem"/>      <Action t="jbart_app.OpenJBartAppFloatingCssEditor" />    </Field>    <Field t="control.SeparatingLine" ID="SeparatingLine" Title="SeparatingLine">      <Style t="gstudio.StudioMenuSeparator"/>    </Field>      <Field t="control.Button" ID="style_as_xml" Title="Style as xml...">        <Style t="gstudio.StudioMenuItem"/>        <Action t="xmlui.ShowXmlDialog" Title="Style as xml..." AutoWrite="true" AutoWriteAllowTagChange="" Xml="%$Settings/styleProps%">          <OnUpdate t="action.RunActions">            <Action t="gstudio.Refresh"/>            <Action t="bart_dt.RefreshDtPopups"/>          </OnUpdate>        </Action>      </Field>      <Field t="control.Button" ID="style_as_xml" Title="Fix item ids">        <Style t="gstudio.StudioMenuItem"/>        <Action t="action.RunActionOnItems" IndicateItemIndex="true">          <Items t="data.List">            <Item value="%$Room/items/item%" />            <Item value="%$Room/items/item/*%" />          </Items>                    <Action t="action.WriteValue" To="%!@id%">            <Value t="data.Math" Expression="%$_ItemIndex%+1" />          </Action>        </Action>      </Field>    <Field t="control.SeparatingLine" ID="SeparatingLine" Title="SeparatingLine">      <Style t="gstudio.StudioMenuSeparator"/>    </Field>    <Field t="data.Pipeline">      <Item value="%$_JBartStudio/SampleSettingFiles%" />      <Item t="instance_editor.SampleSettingsMenuItem" />    </Field>  </xtml></Component><Component id="CustomizeCssSpecificMenuItem" type="field.Fields">  <Param name="CssXml" />  <xtml t="control.Button" ID="gstudio_toolbar_specific_css" Title="%$CssXml/@id%">    <Style t="gstudio.StudioMenuItem"/>    <Action t="jbart_app.OpenJBartAppFloatingCssEditor" CssID="%$CssXml/@id%" />  </xtml>  </Component><Component id="StudioToolbarExtension" type="field.Fields" light="false">  <xtml t="field.Fields">    <Field t="control.SeparatingLine" ID="SeparatingLine" Title="SeparatingLine">      <Style t="gstudio.StudioToolbarLine"/>    </Field>    <Field t="control.Button" ID="gstudio_toolbar_layout" Title="Customize App Style">      <Condition t="gstudio.IsLocalhost"/>      <Style t="google_drive.StudioToolbarIcon"/>      <Image t="gstudio.StudioSmallImage" PositionInSprite="336,0"/>      <FieldAspect t="popup_field_aspect.ToolbarPopup" ToolbarID="studio_toolbar_insert">        <PopupStyle t="gstudio.StudioToolbarMenuPopup"/>        <Contents t="control.Layout">          <Field t="data.Pipeline">            <Item value="%$Styles/style[#1]/styleProps/css%"/>            <Item t="instance_editor.CustomizeCssSpecificMenuItem" CssXml="%%"/>          </Field>        </Contents>      </FieldAspect>    </Field>  </xtml></Component><Component id="SampleSettings" type="data.Data">  <Param name="Name" />  <Param name="File" />  <xtml t="object.Object" Name="%$Name%" File="%$File%">    <Condition t="google_drive.InLocalHost"/>  </xtml></Component><Component id="UpdateVersionBox" type="field.Fields" light="false">  <xtml t="control.Layout">    <FieldAspect t="field_aspect.Variable" VarName="LatestVersion">      <Value t="gstudio_googledrive.WidgetLatestVersion">        <Widget t="text.RemovePrefix" Data="%$Settings/@_widget%" Prefix="apps/"/>      </Value>    </FieldAspect>    <Field t="control.Layout" ID="VersionNotification" Title="Horizontal Layout">      <Layout t="ui.CustomCss" base="layout.HorizontalCss3">        <Style t="layout.HorizontalCss3" Spacing="13"/>        <Css><![CDATA[#this {  color:rgb(34, 34, 34);  font-family:arial, sans-serif;  font-size:13px;  font-weight:bold;  border:1px solid rgb(240, 195, 109);  -webkit-box-shadow:rgba(0, 0, 0, 0.2) 0px 2px 4px 0px;  background-color:rgb(249, 237, 190);  padding:6px 10px;  position:fixed;  top:16px;  z-index1:2000;}#this * {  float:none !important;}#this >.field {}]]></Css>      </Layout>      <Field t="control.Label" ID="_Label2" Title="A new 'Let Me See' version is ready.">        <Style t="ui.CustomCss" base="uitext.PlainText">          <Style t="uitext.PlainText"/>          <Css><![CDATA[#this {}]]></Css>        </Style>      </Field>      <Field t="control.Button" ID="Update" Title="Update Version">        <Style t="ui.CustomCss" base="btn.Hyperlink">          <Style t="btn.Hyperlink"/>          <Css><![CDATA[#this {  cursor:pointer;  text-decoration:underline;}]]></Css>        </Style>        <Action t="async.RunAsyncActions">          <Action t="action.WriteValue" Value="%$Settings/@_version%" To="%$Settings/!@_prevversion%"/>          <Action t="action.WriteValue" Value="%$LatestVersion%" To="%$Settings/@_version%"/>          <Action t="instance_editor.Save"/>          <Action t="uiaction.ReloadPage"/>        </Action>      </Field>      <Field t="control.Button" ID="Hide" Title="Hide">        <Style t="ui.CustomCss" base="btn.Hyperlink">          <Style t="btn.Hyperlink"/>          <Css><![CDATA[#this {  cursor:pointer;  text-decoration:underline;}]]></Css>        </Style>        <Action t="action.RunActions">          <Action t="action.WriteValue" Value="true">            <To t="data.LocalStorage" Key="VersionNotificationHidden_%$LetestVersion%"/>          </Action>          <Action t="field.RefreshField" FieldID="VersionNotification"/>        </Action>      </Field>      <FieldAspect t="field_feature.HandleEvent">        <Event t="field_feature.ControlAttached"/>        <Action t="operation.RunActionInJavascript">          <Code><![CDATA[function run(data,context) {var control = context.vars.ControlElement[0];function fixsize() {var width = $(control).outerWidth();$(control).css("left",window.innerWidth/2 - width/2);}fixsize();aa_attach_window_resize(fixsize,control);}]]></Code>        </Action>      </FieldAspect>      <FieldAspect t="field_aspect.Hidden">        <OnCondition t="field_aspect.CheckConditionForEveryItem" DataForCondition="Item data" WhenHidden="Do not render">          <ShowCondition t="yesno.And">            <Item t="yesno.NotEmpty" Value="%$Settings/@_version%" />            <Item t="yesno.ItemsNotEqual" Item1="%$Settings/@_version%" Item2="dev"/>            <Item t="yesno.ItemsNotEqual" Item1="%$Settings/@_version%" Item2="%$LatestVersion%" />            <Item t="yesno.IsEmpty">              <Value t="data.LocalStorage" Key="VersionNotificationHidden_%$LetestVersion%" ValueAsText="true"/>            </Item>          </ShowCondition>        </OnCondition>      </FieldAspect>    </Field>  </xtml></Component></xtml>