<xtml ns="jbart_app"><Component id="SimpleCssEditorGroup" type="field.FieldAspect" description="Add in the group of simple css editor fields">  <xtml t="field_aspect.Variable" VarName="AppCssXmls">    <Value t="data.Pipeline">      <Item value="%$Settings/styleProps/css%" />      <Item t="object.Object" id="%@id%">        <SingleProperty name="Xml" t="css_dt.Css2Xml" />      </Item>    </Value>  </xtml></Component><Component id="SettingsCssField" type="field.Fields">  <Param name="Title"/>  <Param name="CssID" type="dynamic_enum" Options="%$Settings/styleProps/css/@id%"/>  <Param name="Selector" Default="#this"/>  <Param name="FieldType" type="field_type.Type" script="true" />  <Param name="CssXmlValue" Default="%color/@value%" script="true"/>  <Param name="FieldAspect" type="field.FieldAspect[]"/>  <Param name="ID" idField="true" />  <xtml t="fld.Field" ID="%$ID%" Title="%$Title%">    <FieldType t="xtml.UseParam" Param="FieldType" />    <FieldAspect t="field_aspect.FieldData">      <FieldData t="data.Pipeline">        <Item value="%$AppCssXmls[id='{$CssID}']/Xml%" />        <Item value="%Css[@selector='{$Selector}']/Simplifiers%" />        <Item t="xtml.UseParam" Param="CssXmlValue" />      </FieldData>    </FieldAspect>    <FieldAspect t="field_aspect.Hidden">      <OnCondition t="field_aspect.CheckConditionForEveryItem" DataForCondition="Field data" WhenHidden="Do not render">        <ShowCondition t="yesno.NotEmpty" Value="%$Settings/styleProps/css[#{$CssID}]%" />      </OnCondition>    </FieldAspect>    <FieldAspect t="field_feature.HandleEvent">      <Event t="field_feature.Update"/>      <Action t="action.WriteValue">          <To t="xml.CDataRef" Element="%$Settings/styleProps/css[#{$CssID}]%" />          <Value t="data.Pipeline">            <Item value="%$AppCssXmls[id='{$CssID}']/Xml%"/>            <Item t="css_dt.Xml2Css" />          </Value>      </Action>    </FieldAspect>        <FieldAspect t="xtml.UseParamArray" Param="FieldAspect"/>  </xtml></Component><Component id="OpenJBartAppFloatingCssEditor" type="action.Action">  <Param name="CssID" type="dynamic_enum" Options="%$Settings/styleProps/css/@id%"/>  <xtml t="action.RunActions">    <Var name="CssEntry" t="data.FirstSucceeding">      <Item value="%$Settings/styleProps/css[#{$CssID}]%" />      <Item t="data.CreateIfDoesNotExist" Query="%$Settings/styleProps/css[#{$CssID}]%">        <Condition t="yesno.NotInLocalHost" />        <Create t="xml.AddXmlChildren" Parent="%$Settings/styleProps%" Children="%$Styles/style[#1]/styleProps/css[#{$CssID}]%" CloneChildren="true" />      </Item>      <Item value="%$Styles/style[#1]/styleProps/css[#{$CssID}]%" />    </Var>    <Action t="popup.OpenPopup" PopupTitle="Style Editor">    <Style t="gstudio.StudioFloatingPopup" MinWidth="400px"/>    <Feature t="gstudio.StudioFloatingPopupFeatures" Identifier="instance_style" FieldIdsToRefreshWhenOpenOrClosed="" Xtml1="%$Settings/styleProps%">      <Location t="popup.ScreenCenter" />    </Feature>    <Feature t="popup.AutoFocusOnFirstInput"/>        <Contents t="field.InnerPage">          <Field t="control.Layout" ID="_Group82" Title="Group">            <FieldAspect t="field_feature.HandleEvent">              <Event t="field_feature.ControlAttached"/>              <Action t="gstudio.AutoRefreshOnSettingsChange" Settings="%$Settings%" >                <RefreshAction t="gstudio.Refresh">                  <Var name="ShownPage" t="ui.UrlFragment" Attribute="gpage"/>                  <Condition value="%$ShownPage% == 'main'" />                </RefreshAction>              </Action>            </FieldAspect>                                <Layout t="layout.Default"/>          <Field t="control.TabControl" ID="jbartapp_Style_Tabs" Title="Style Tabs">            <Style t="gstudio.StudioStyleTabs"/>            <Field t="control.Layout" ID="dt_css_designer_2" Title="Designer">              <Field t="css_dt.EditorGroup">                <CssAsXml t="field_dt.CssXmlValueByRef" CssCDataElement="%$CssEntry%">                  <OnChange1 t="xtml.UseParam" Param="OnUpdate" />                </CssAsXml>              </Field>                <FieldAspect t="field_feature.Css">                  <Css><![CDATA[#this { padding: 10px; }]]></Css>                </FieldAspect>                          </Field>            <Field t="control.Layout" ID="dt_css" Title="Css">              <Field t="field.CustomControl" HideTitle="true">                <Control t="xmlui.CodeMirrorTextarea" Class="cmtextarea" WrapperCss="" AutoFocus="true" TextWrapping="false" Resizer="true" IdentifierToRecallLastSize="CodeMirrorForStyles" Width="390px" Height="380px" Type="css" AutoIndent="true">                  <Data t="xml.CDataValue" Element="%$CssEntry%"/>                  <OnUpdate t="action.WriteValue" Value="%%">                    <To t="xml.CDataRef" Element="%$CssEntry%" />                  </OnUpdate>                </Control>              </Field>            </Field>          </Field>          </Field>        </Contents>         </Action>         </xtml></Component></xtml>