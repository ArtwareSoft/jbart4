<file _type="jbart_project" id="Form_Validations" name="Form Validations" modifiedDate="31/01/2011 10:37" dateCreated="16/01/2011 15:28" vid="51" type="prototype" image="" description="">  <xtml ns="sample">    <Component id="Widget" type="jbart.Widget">      <xtml t="jbart.Widget">        <MainPage t="sample.main"/>        <DataResource t="jbart_resource.Data" ResourceID="Data" ValueType="xml">          <Value t="xml.Xml">            <xml/>          </Value>        </DataResource>        <ApplicationFeature t="appfeature.Css">          <Css><![CDATA[#this { font: 12px Arial; }#this *:focus { outline:none; }p { margin: 0} ]]></Css>        </ApplicationFeature>      </xtml>    </Component>    <Component id="main" type="jbart.MyWidgetPage">      <xtml t="control.Layout" ID="main" ContentType="" Title="main">        <FieldAspect t="field_aspect.FieldData" FieldData="%$Data%"/>        <Field t="control.PropertySheet" ID="Fields" Title="Fields">          <Operations t="operation.Operations"/>          <Field t="fld.Field" FieldData="%!@name%" ID="name" Title="Name">            <FieldType t="fld_type.EditableText">              <Style t="editable_text.JBartTextbox"/>            </FieldType>            <FieldAspect t="field_aspect.Mandatory" ErrorMessage="Please insert name"/>          </Field>          <Field t="fld.Field" FieldData="%!@age%" ID="age" Title="Age">            <FieldType t="fld_type.EditableText">              <Style t="editable_text.JBartTextbox"/>            </FieldType>            <FieldAspect t="field_aspect.Validation" AddTitleToErrorMessage="true" ShowErrorMessageNextToField="true" ErrorMessage="Age must be between 5 to 120">              <ValidationLogic t="validation.CustomValidation">                <SuccessCondition t="yesno.And">                  <Item t="yesno.GreaterThan" Than="5"/>                  <Item t="yesno.LessThan" Than="120"/>                </SuccessCondition>              </ValidationLogic>            </FieldAspect>          </Field>          <Field t="fld.Field" FieldData="%!@I_agree%" ID="I_agree" Title="I Agree">            <FieldType t="fld_type.EditableBoolean" HidePropertySheetTitle="true">              <Style t="editable_boolean.Checkbox" HideTitle="true"/>            </FieldType>            <FieldAspect t="field_aspect.Title" Title="Yes, I've read the information and I agree."/>            <FieldAspect t="field_aspect.HidePropertyTitle"/>            <FieldAspect t="field_aspect.Mandatory" ErrorMessage="Please confirm that you've read and that you agree."/>          </Field>          <Style t="properties.Default" PropertiesWidth="120px"/>        </Field>        <Layout t="layout.Vertical" Spacing="26px"/>        <Field t="control.Button" ID="Validate" Title="Validate" HideTitle="true">          <Style t="btn.JBart"/>          <Action t="action.Validate" Group="Fields">            <WhenValid t="operation.RunActions">              <Action t="action.WriteValue" To="%$Data/!@isValid%" Value="true"/>              <Action t="field.RefreshField" FireOnUpdate="" FieldID="Form_is_Valid" Scope="screen"/>            </WhenValid>          </Action>        </Field>        <Field t="control.Label" ID="Form_is_Valid" Title="Form is Valid">          <Style t="uitext.PlainText"/>          <FieldAspect t="field_aspect.Hidden">            <OnCondition t="field_aspect.CheckConditionForEveryItem" DataForCondition="Item data" WhenHidden="Render as hidden html" ShowCondition="%$Data/@isValid%"/>          </FieldAspect>        </Field>      </xtml>    </Component>    <Component id="Palettes" type="data.Data">      <xtml t="xml.Xml">        <palette>          <colors name="custom"/>          <fonts/>        </palette>      </xtml>    </Component>    <Component id="CustomValidations" type="jbart.MyWidgetPage">      <xtml t="control.Layout" ID="CustomValidations" Title="CustomValidations">        <FieldAspect t="field_aspect.ValidationStyle">          <Style t="ui.CustomStyle" base="validation.Default">            <Html><![CDATA[<div/>]]></Html>            <Css><![CDATA[.aa_error_message {  display: block;  color: green;  padding-top:3px;}input.aa_error {  background: pink !important;}]]></Css>            <Javascript><![CDATA[function init(validationStyle) {  aa_initValidationStyle(validationStyle,{	showValidationError: function(cntr,topElement,errorObject) {			var elem = errorObject.element;			var messageDiv = $(cntr.el.cloneNode(true)).addClass('aa_error_message').text(errorObject.errorMessage);			elem.parentNode.insertBefore(messageDiv[0],elem);			elem.jbValidationMessage = messageDiv;			$(elem).addClass('aa_error');			if (!elem.jbValidationFocusEventBound) {				elem.jbValidationFocusEventBound = true;				if (!elem.tabIndex) elem.tabIndex = 0;				$(elem).focus(function() {					$(elem).removeClass('aa_error');					if (elem.jbValidationMessage)						aa_remove(elem.jbValidationMessage,true);                    validationStyle.clearErrorSummary(validationStyle,topElement);				});			}    },    clearErrorSummary: function(validationStyle,topElement,errors) {      $(topElement).find('.summary_error').remove();    },    showErrorSummary: function(validationStyle,topElement,errors) {      var err = $('<div class="aa_error_message summary_error" />').text('you have errors');      topElement.appendChild(err[0]);    }  });}]]></Javascript>          </Style>        </FieldAspect>        <Layout t="layout.Vertical" Spacing="25px"/>        <FieldAspect t="field_aspect.FieldData" FieldData="%$Data%"/>        <Field t="control.PropertySheet" ID="Fields" Title="Fields">          <Field t="fld.Field" FieldData="%!@name%" ID="name" Title="Name">            <FieldType t="fld_type.EditableText">              <Style t="editable_text.JBartTextbox"/>            </FieldType>            <FieldAspect t="field_aspect.Mandatory" ErrorMessage="Please insert name"/>          </Field>          <Field t="fld.Field" FieldData="%!@age%" ID="age" Title="Age">            <FieldType t="fld_type.EditableText">              <Style t="editable_text.JBartTextbox"/>            </FieldType>          </Field>          <Field t="fld.Field" FieldData="%!@I_agree%" ID="I_agree" Title="I Agree">            <FieldType t="fld_type.EditableBoolean" HidePropertySheetTitle="true">              <Style t="editable_boolean.Checkbox" HideTitle="true"/>            </FieldType>            <FieldAspect t="field_aspect.Title" Title="Yes, I've read the information and I agree."/>            <FieldAspect t="field_aspect.HidePropertyTitle"/>            <FieldAspect t="field_aspect.Mandatory" ErrorMessage="Please confirm that you've read and that you agree."/>          </Field>          <Style t="properties.Default" PropertiesWidth="120px"/>        </Field>        <Layout t="layout.Vertical" Spacing="26px"/>        <Field t="control.Button" ID="Validate" Title="Validate" HideTitle="true">          <Style t="btn.JBart"/>          <Action t="action.Validate" Group="Fields">            <WhenValid t="operation.RunActions">              <Action t="action.WriteValue" To="%$Data/!@isValid%" Value="true"/>              <Action t="field.RefreshField" FireOnUpdate="" FieldID="Form_is_Valid" Scope="screen"/>            </WhenValid>          </Action>        </Field>        <Field t="control.Label" ID="Form_is_Valid" Title="Form is Valid">          <Style t="uitext.PlainText"/>          <FieldAspect t="field_aspect.Hidden">            <OnCondition t="field_aspect.CheckConditionForEveryItem" DataForCondition="Item data" WhenHidden="Render as hidden html" ShowCondition="%$Data/@isValid%"/>          </FieldAspect>        </Field>      </xtml>    </Component>  </xtml>  <Tests>    <Test Name="validate mandatory" t="async.JBartWidgetUsage" RunInAllTests="true" WaitForAsyncActionsToEnd="false">      <ExpectedResult t="usage.ContainsText" OneOf="" LookIn="" IgnoreCase="" RemoveHiddenElements="true" IgnoreOrder="" AndNotContainingText="form is valid">        <Text value="aa_error"/>      </ExpectedResult>      <RunOnControl t="operation.ClickOnButton" Button="Validate"/>    </Test>    <Test Name="validate mandatory textbox and checkbox" t="async.JBartWidgetUsage" RunInAllTests="true" WaitForAsyncActionsToEnd="false">      <ExpectedResult t="usage.ContainsText" OneOf="" LookIn="" IgnoreCase="" RemoveHiddenElements="true" IgnoreOrder="">        <Text value="Form is Valid"/>      </ExpectedResult>      <RunOnControl t="action.RunActions">        <Action t="uiaction.SetText" RunOn=".fld_name" StayInControl="" DoNotFireEvents="" Mode="ReplaceAll" Text="Homer"/>        <Action t="uiaction.Click" RunOn="$.find('.fld_I_agree').find('div')"/>        <Action t="operation.ClickOnButton" Button="Validate"/>      </RunOnControl>    </Test>    <Test Name="Show mandatory error for checkbox" t="async.JBartWidgetUsage" RunInAllTests="true" WaitForAsyncActionsToEnd="false">      <ExpectedResult t="usage.ContainsText" OneOf="" LookIn="" IgnoreCase="" RemoveHiddenElements="true" IgnoreOrder="">        <Text value="Please confirm that you've read and that you agree."/>      </ExpectedResult>      <RunOnControl t="action.RunActions">        <Action t="uiaction.SetText" RunOn=".fld_name" StayInControl="" DoNotFireEvents="" Mode="ReplaceAll" Text="Homer"/>        <Action t="operation.ClickOnButton" Button="Validate"/>      </RunOnControl>    </Test>    <Test Name="custom validations" t="async.JBartWidgetUsage" RunInAllTests="true" WaitForAsyncActionsToEnd="false">      <ExpectedResult t="usage.ContainsText" OneOf="" LookIn="screen">        <Text value="Please insert name"/>        <Text value="fld_name"/>        <Text value="you have errors"/>      </ExpectedResult>      <Page t="sample.CustomValidations"/>      <RunOnControl t="operation.ClickOnButton" Button="Validate"/>    </Test>  </Tests></file>