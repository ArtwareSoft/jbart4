<xtml ns="lmc" altc="true"><Component id="AgentNews" type="jbart.MyWidgetPage">  <Param name="IsManager" type="data.Boolean"/>  <xtml t="control.Layout" ID="news" Title="News">    <Layout t="layout.Vertical" Spacing="13px"/>    <Field t="field.ItemListContainer" ID="news_cntr" Title="news">      <Field t="control.Layout" ID="_Group" Title="Group">        <Field t="control.Layout" ID="news_filter" Title="Filters">          <Layout t="layout.Horizontal" Spacing="10"/>          <FieldAspect t="itemlist_aspect.FilterGroup"/>          <Field t="fld.Field" Title="Show my customers only" ID="Filter_fast_find" ReadOnlyText="" FieldData="%!@agent_filter%">            <FieldType t="fld_type.Picklist" AllowEmptyValue="true" AllowValueNotInOptions="">              <Options t="editable_picklist.OptionsTable">                <Option t="editable_picklist.Option" Code="%$User/@name%" DisplayName="My customers"/>              </Options>              <Style t="editable_picklist.RadioButtons" AddRadioButtonForEmptyValue="true"/>            </FieldType>            <FieldAspect t="itemlist_aspect.Filter" FieldData="%@agent%" ImmediateFilter="true">              <FilterType t="itemlist_filter.ExactMatch" ValuesMultiple="" QueryMultiple=""/>            </FieldAspect>            <FieldAspect t="fld_aspect.PicklistProperties" AutoRecalcOptions="" HideSearchBox="" TextForEmptyValueInPopup="" TextForEmptyValueInRadio="All customers"/>            <FieldAspect t="field_aspect.Hidden">              <OnCondition t="field_aspect.CheckConditionForEveryItem" DataForCondition="Item data" WhenHidden="Do not render">                <ShowCondition t="yesno.And">                  <Item t="yesno.IsEmpty" Value="%$AllRoomHeaders%"/>                </ShowCondition>              </OnCondition>            </FieldAspect>          </Field>          <FieldAspect t="field_feature.Css">            <Css><![CDATA[#this { padding-bottom: 10px; height: 17px; }#wrapper { }]]></Css>          </FieldAspect>          <Field t="control.Button" ID="_Button" Title="Refresh">            <Style t="ui.CustomCss" base="btn.LMCHyperlink">              <Style t="btn.LMCHyperlink">&#xa;              </Style>              <Css><![CDATA[#this { cursor: pointer; font: 14px arial;   color: #7b94b5; text-decoration: none; }#this:hover { text-decoration: underline; }#this.disabled { text-decoration: none;   cursor: default; }]]></Css>            </Style>            <FieldAspect t="field_feature.Layout">              <Css><![CDATA[#this { top: 0px; right: 0px; position: absolute; }]]></Css>            </FieldAspect>            <Action t="async.RunAsyncActions" StopOnError="true">              <Action t="lmc.RefreshLMCHeaders" FieldToRefreshOnUpdate="news_cntr" UpdateMessgae="News feed updated"/>              <Action t="field.RefreshField" FieldID="news" FireOnUpdate="" Scope="screen"/>              <Action t="lmc.TrackUserAction" Type="refresh news feed"/>            </Action>            <FieldAspect t="field_feature.CssClass" AddClassTo="content" ClassName="refresh_news"/>          </Field>        </Field>        <Layout t="ui.CustomCss" base="layout.Default">          <Style t="layout.Default"/>          <Css><![CDATA[#this {  width:580px;  position:relative;}.lmc_agent_mobile #this {  width:auto;}]]></Css>        </Layout>        <Field t="field.ItemList" Title="news" ID="lmc_news_list">          <FieldAspect t="itemlist_aspect.ShowTextWhenNoItems" Text="No interesting customer activity">            <Style t="text_as_item.Default"/>          </FieldAspect>          <View t="ui.CustomCss" base="itemlist_style.Simple">            <Style t="itemlist_style.Simple"/>            <Css><![CDATA[#this>.aa_item {} #this{}]]></Css>          </View>          <Field t="control.Layout" ID="_Group" Title="Group">            <Field t="control.Button" ID="news_room_title" Title="Room" HideTitle="true">              <Style t="ui.CustomCss" base="btn.LMCHyperlink">                <Style t="btn.LMCHyperlink"/>                <Css><![CDATA[#this { cursor: pointer; color: #5e5e5e;   font-weight: bold; font-size: 14px;   text-decoration: none; display: block;   margin-top: 3px; margin-left: 5px;   width:85\%;  }#this:hover { text-decoration: underline; }]]></Css>              </Style>              <Action t="action.IfThenElse" If="%$IsManager%">                <Then t="lmc_manager.ShowRoomFromHeaders"/>                <Else t="async.RunAsyncActions" StopOnError="true">                  <Action t="lmc.SetCurrentRoom" RoomID="%@id%"/>                  <ProgressStyle t="async_ui.ChangeCursorForProgress"/>                  <Action t="operation.ChangeTab" TabControl="Agent_room_tab" MoveTo="specific tab" TabToMoveTo="customer_activity_tab"/>                </Else>              </Action>              <ButtonText t="data.Pipeline">                <Item value="%@customerName% ‎ (%$Header/@visitorTimeMin% minutes, %$Header/@visitorJoinCount% joins)"/>                <Var name="Header" t="lmc.LMCRoomHeader" RoomID="%@id%"/>                <Item value="%% was last active  %$Time%"/>                <Var name="Time" t="text.TimeFromNow" Time="%$Header/@lastEventTime%"/>              </ButtonText>            </Field>            <Layout t="ui.CustomCss" base="layout.Default">              <Style t="layout.Default"/>              <Css><![CDATA[#this { min-height: 45px; padding-bottom: 4px;   margin-bottom: 15px; border: 1px solid #d9d9d9;   padding: 5px; background-color: #ebebeb;   width: 100\%; position: relative;   box-sizing: border-box; }.aa_selected #this { border-color: #61b6c7;   background-color: #cae5eb; }]]></Css>            </Layout>            <Field t="control.Label" ID="_Label" Title="Agent" Text="%@agent% ">              <Style t="ui.CustomCss" base="uitext.PlainText">                <Style t="uitext.PlainText"/>                <Css><![CDATA[#this { top: 9px; right: 12px; position: absolute;   color: #8a8a8a; }.lmc_agent_mobile #this { position:relative; color: #545454;  margin-left: 17px;  margin-bottom: 12px; }  ]]></Css>              </Style>            </Field>            <Field t="control.Label" ID="_Label" Title="Status" Text="Status: %@customerStatus%">              <Style t="ui.CustomCss" base="uitext.PlainText">                <Style t="uitext.PlainText"/>                <Css><![CDATA[#this { color: #545454; margin-top: 12px;   margin-left: 5px; }]]></Css>              </Style>              <FieldAspect t="field_aspect.Hidden">                <OnCondition t="field_aspect.CheckConditionForEveryItem" DataForCondition="Item data" WhenHidden="Do not render" ShowCondition="%@customerStatus% != ''"/>              </FieldAspect>              <FieldAspect t="field_feature.Layout" dragProperty="#this margin">                <Css><![CDATA[#this { margin-top: 3px; margin-right: 5px;   margin-bottom: 4px; }#wrapper { }]]></Css>              </FieldAspect>            </Field>            <Field t="control.Label" ID="_Label1" Title="Project">              <Style t="ui.CustomCss" base="uitext.PlainText">                <Style t="uitext.PlainText"/>                <Css><![CDATA[#this { color: #545454; margin-top: 12px;   margin-left: 5px; }]]></Css>              </Style>              <FieldAspect t="field_feature.Layout" dragProperty="#this margin">                <Css><![CDATA[#this { margin-top: 3px; margin-right: 5px;   margin-bottom: 4px; }#wrapper { }]]></Css>              </FieldAspect>              <Text t="data.Pipeline">                <Item value="%../../@id%"/>                <Item value="%$Projects/project[#{}]/@name%"/>              </Text>            </Field>            <Field t="control.Layout" ID="_Vertical_Layout" Title="activity">              <Layout t="ui.CustomCss" base="layout.Vertical">                <Style t="layout.Vertical" Spacing="0"/>                <Css><![CDATA[#this { margin-top: 10px; }#this >.field:not(:last-child) { margin-bottom: 0; }]]></Css>              </Layout>              <FieldAspect t="async.AsyncActionBeforeLoad" ShowLoadingTextInStudio="">                <LoadingStyle t="loading_style.Default" Height="120px"/>                <Action t="async.RunAsyncActions" StopOnError="true">                  <Action t="lmc.EnsureRoomInFullRooms" RoomID="%@id%">                    <ProjectID t="data.FirstSucceeding">                      <Item value="%../../@id%"/>                      <Item value="%$Project/@id%"/>                    </ProjectID>                  </Action>                  <Action t="lmc.EnsureCustomerActivityLog" RoomID="%@id%">                    <ProjectID t="data.FirstSucceeding">                      <Item value="%../../@id%"/>                      <Item value="%$Project/@id%"/>                    </ProjectID>                  </Action>                </Action>              </FieldAspect>              <Field t="field.ItemList" Title="logs" ID="cobrowse_logs_in_feed">                <View t="ui.CustomCss" base="itemlist_style.JBartTableNoHeader">                  <Style t="itemlist_style.JBartTableNoHeader" MinWidth="540px"/>                  <Css><![CDATA[#this >table {  width:100\%;}#this>table>tbody>tr>td {  vertical-align:middle;  color:#404040;  border-collapse:collapse;  border-spacing:0px;}tbody>tr:first-child .group_title { margin-top: 0 !important; }]]></Css>                </View>                <FieldAspect t="field_aspect.ItemListContainer">                  <Items t="itemlist.Items">                    <Items t="data.Pipeline">                      <Item t="lmc.CustomerActivityLogItems" RoomID="%@id%"/>                      <Aggregator t="data.Subset" Count="5"/>                    </Items>                  </Items>                </FieldAspect>                <Field t="control.Layout" ID="_Group" Title="Icon">                  <Field t="field.Image" ID="_Image4" Title="icon">                    <Image t="image.ImageInSprite" Url="_jbartImages_/LetMeSee/lmc_sprite-25.png?v=1108" Size="25,25">                      <PositionInSprite t="text.FirstSucceeding">                        <Item value="25,75" Condition="%Event/type% == 'view'"/>                        <Item value="0,75" Condition="%Event/type% == 'jumped'"/>                        <Item value="100,75" Condition="%Event/type% == 'agentInvitation'"/>                        <Item value="125,75" Condition="%Event/type% == 'youtube_playing'"/>                        <Item value="150,75" Condition="%Event/type% == 'printItem'"/>                        <Item value="175,75" Condition="%Event/type% == 'callme'"/>                        <Item value="75,75">                          <Condition t="yesno.And">                            <Item value="%Event/type% == 'join'"/>                            <Item value="%Event/args/width% != ''"/>                            <Item value="%Event/args/width% &gt; 450"/>                          </Condition>                        </Item>                        <Item value="50,75">                          <Condition t="yesno.And">                            <Item value="%Event/type% == 'join'"/>                            <Item value="%Event/args/width% != ''"/>                            <Item value="%Event/args/width% &lt;= 450"/>                          </Condition>                        </Item>                        <Item value="50,75" Condition="%Event/type% == 'join'"/>                      </PositionInSprite>                    </Image>                    <Style t="image.PlainImage"/>                  </Field>                  <Layout t="ui.CustomCss" base="layout.Default">                    <Style t="layout.Default"/>                    <Css><![CDATA[#this { width: 25px; height: 25px; overflow: hidden;   position: relative; }]]></Css>                  </Layout>                  <FieldAspect t="field_feature.Css">                    <Css><![CDATA[#this { }#wrapper { width: 28px; }]]></Css>                  </FieldAspect>                </Field>                <Field t="control.Button" ID="_Button881" Title="Text" HideTitle="true">                  <Style t="ui.CustomCss" base="btn.Hyperlink">                    <Style t="btn.Hyperlink"/>                    <Css><![CDATA[#this {  font-family:arial;}]]></Css>                  </Style>                  <ButtonText t="data.Pipeline">                    <Var name="Duration" t="lmc.FormatEventDuration" DurationInMillis="%Event/duration%"/>                    <Item value="%Text%"/>                    <Item t="lmc.ReplaceVariableFields" RoomXml="%$Room%"/>                    <Item t="data.IfThenElse" If="%$Duration% != ''" Then="%% ‎(%$Duration%)" Else="%%"/>                  </ButtonText>                </Field>                <Field t="control.Label" ID="Time" Title="Time">                  <Style t="ui.CustomCss" base="uitext.PlainText">                    <Style t="uitext.PlainText"/>                    <Css><![CDATA[#this { color: #525252; }]]></Css>                  </Style>                  <Text t="data.Pipeline">                    <Item t="text.MomentTimeFormat" Time="%Time%">                      <Format t="data.IfThenElse" If="%$IsMobile%" Then="ddd HH:mm:ss" Else="ddd HH:mm:ss">&#xa;                      </Format>                    </Item>                  </Text>                  <FieldAspect t="field_feature.Css">                    <Css><![CDATA[#this { }#wrapper { text-align: right; }]]></Css>                  </FieldAspect>                </Field>              </Field>            </Field>            <FieldAspect t="field_feature.Css">              <Css><![CDATA[.lmc_agent_mobile #wrapper {}]]></Css>            </FieldAspect>            <FieldAspect t="field_aspect.Variable" VarName="NewsRoomHeader" Value="%%"/>            <Field t="control.Button" ID="_Button6" Title="Open in a new tab">              <Style t="ui.CustomCss" base="btn.LMCHyperlink">                <Style t="btn.LMCHyperlink"/>                <Css><![CDATA[#this {  display:block;  cursor:pointer;  color:#1E64B5;  text-decoration:none;  font-size:13px;  font-family:arial;  padding-top:4px;  padding-left:5px;}#this:hover {  text-decoration:underline;}#this.disabled {  text-decoration:none;  cursor:default;}]]></Css>              </Style>              <Action t="operation.Link" OpenInANewTab="true" Link="https://jb-letmesee.appspot.com/letmesee.html?project=%../../@id%#?roomid=%@id%?view=room"/>              <FieldAspect t="field_feature.Hidden" DataForCondition="Item data" WhenHidden="Do not render">                <ShowCondition t="yesno.And">                  <Item value="%$IsManager%"/>                  <Item value="%$IsMobile%"/>                </ShowCondition>              </FieldAspect>            </Field>          </Field>          <FieldAspect t="itemlist_aspect.LongList" MaxItemsPerPage="5">            <Style t="ui.CustomCss" base="text_as_item.Default">              <Style t="text_as_item.Default"/>              <Css><![CDATA[#this { cursor: pointer; color: #333; font-size: 14px;   font-family: Arial, Helvetica;   margin-bottom: 5px; }#this:not(.in_table) { padding-top: 10px; clear: both; }#this.in_table { padding: 3px; }]]></Css>            </Style>          </FieldAspect>        </Field>      </Field>      <Items t="itemlist.Items">        <Items t="data.Pipeline">          <Item t="lmc.LMCRoomsInHeaders"/>          <Aggregator t="data.Sort" SortBy="%@lastEventTime%" Order="Descending"/>          <Item t="yesno.PassesFilter" Filter="%@lastEventTime% != ''"/>          <Item t="yesno.PassesFilter" Filter="%@lastEventTime% != 'NaN'"/>        </Items>      </Items>      <Layout t="ui.CustomCss" base="layout.Default">        <Style t="layout.Default"/>        <Css><![CDATA[#this { position:relative;}]]></Css>      </Layout>    </Field>  </xtml></Component></xtml>